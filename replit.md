# 미트하임 자동견적 프로그램

React와 Vite를 사용한 건축 자재 자동 견적 시스템입니다. 건축 자재의 견적을 자동으로 계산하고 PDF로 출력할 수 있습니다.

## 프로젝트 개요

**목적**: 건축 자재 견적을 면적 기반으로 자동 계산하고 PDF로 출력하는 전문가용 견적 시스템

**주요 기능**:
- 4가지 건축 시스템 지원: RC(철근콘크리트), LGS(경량철골조), WOOD(목조), FORM(패턴거푸집)
- 면적 기반 자재 수량 자동 계산
- 두께별 단가 설정 (RC, 트랙식, 패턴거푸집)
- 로스율 설정 (단열재, 타일)
- VAT 포함/별도 선택
- 반올림 단위 설정
- 브라우저 인쇄 기능을 통한 PDF 출력
- 가격표 관리 페이지

## 기술 스택

**Frontend**:
- React 18 + TypeScript
- Wouter (라우팅)
- TanStack Query (데이터 패칭)
- Shadcn UI (컴포넌트)
- Tailwind CSS (스타일링)

**Backend**:
- Express.js
- In-memory storage
- RESTful API

## 프로젝트 구조

```
├── client/
│   ├── src/
│   │   ├── pages/
│   │   │   ├── estimator.tsx       # 견적 계산 페이지
│   │   │   └── settings.tsx        # 가격표 관리 페이지
│   │   ├── lib/
│   │   │   └── calculations.ts     # 견적 계산 로직
│   │   └── App.tsx                 # 메인 앱 컴포넌트
├── server/
│   ├── routes.ts                   # API 라우트
│   └── storage.ts                  # 데이터 저장소
└── shared/
    └── schema.ts                   # 공유 타입 정의
```

## 데이터 모델

**PriceConfiguration** (가격 설정):
- `rcThicknessPrices`: RC 두께별 단가 (mm → 원/㎡)
- `trackThicknessPrices`: 트랙식 두께별 단가 (mm → 원/㎡)
- `formThicknessPrices`: 패턴거푸집 두께별 단가 (mm → 원/㎡)
- `materialPrices`: 부자재 가격 (품명 → 원)
- `laborRates`: 인건비 (항목 → 원/㎡)

## 계산 로직

### RC 시스템 (철근콘크리트)
- 단열재: 면적 × 로스율 배수
- 디스크 앙카: 5.3개/㎡
- 접착 몰탈: 0.05통/㎡
- 단열재 부착용 폼본드: 0.1666667개/㎡
- 드릴비트: 0.1개/㎡
- Terra Flex: 0.1666667포/㎡
- 벽돌타일: 면적 × 타일 로스율 배수
- 메지 시멘트: 0.2631579포/㎡
- 노무비: 단열재, 타일, 메지 각 1.0㎡당

### LGS/WOOD 시스템 (경량철골조/목조)
- 단열재: 면적 × 로스율 배수 (목조는 단가 +1000원)
- 알루미늄 트랙: 2.7개/㎡
- 디스크 앙카: 3세트/㎡ (두께별 단가 차등)
- 철판피스/델타피스: 5개/㎡
- 단열재 부착용 폼본드: 0.1538개/㎡
- Terra Flex: 0.1666667포/㎡
- 벽돌타일: 면적 × 타일 로스율 배수
- 메지 시멘트: 0.2631579포/㎡
- 노무비: 단열재, 타일, 메지 각 1.0㎡당

### FORM 시스템 (패턴거푸집)
- 패턴 거푸집 패널: 면적 × 두께별 단가
- 박리제: 50㎡당 1통
- 시공 인건비: 12,000원/㎡

## API 엔드포인트

- `GET /api/prices` - 가격 설정 조회
- `PUT /api/prices` - 가격 설정 업데이트

## 사용 방법

1. **견적 계산**:
   - 시스템 선택 (RC/LGS/WOOD/FORM)
   - 면적 입력 (m²)
   - 두께 선택 (해당 시스템의 경우)
   - 로스율 설정 (단열재, 타일)
   - 부가세 포함 여부 선택
   - 반올림 단위 설정
   - 자재 내역 및 총액 확인
   - 인쇄/PDF 저장

2. **가격표 관리**:
   - 가격표 관리 버튼 클릭
   - RC/트랙식/패턴거푸집 두께별 단가 수정
   - 부자재 가격 수정
   - 인건비 수정
   - 저장 버튼 클릭

## 특이사항

- 메지시멘트, 단열재 부착용 폼본드, Terra Flex는 올림 처리
- 최종 금액은 반올림 단위에 따라 버림 처리
- 인쇄 시 별도의 PDF 출력용 레이아웃 제공
- 가격 설정은 in-memory에 저장 (서버 재시작 시 기본값으로 복원)

## 최근 변경사항

- 2025-10-21: 초기 구현 및 핵심 버그 수정 완료
  - Frontend 컴포넌트 구현 (견적 계산, 가격표 관리)
  - 계산 로직 구현 및 완전 설정화 (모든 가격이 가격표 관리에서 설정 가능)
  - 데이터 스키마 정의
  - **버그 수정**: 부자재 가격이 하드코딩되어 있던 문제 해결
  - **버그 수정**: 디스크 앙카 가격이 두께별로 하드코딩되어 있던 문제 해결 (기본 가격 × 두께 계수 방식으로 변경)
  - **버그 수정**: FORM 시스템 인건비가 하드코딩되어 있던 문제 해결
  - 가격 설정 시스템 완전 설정화 완료 - 가격표 관리 페이지의 모든 변경사항이 견적에 즉시 반영됨

## 프로젝트 상태

✅ **완료**: 모든 핵심 기능 구현 완료
- 4가지 건축 시스템 지원 (RC, LGS, WOOD, FORM)
- 면적 기반 자동 계산
- 완전 설정 가능한 가격 시스템
- PDF 출력 기능
- 아키텍트 최종 승인 완료

## 가격 설정 시스템

모든 가격이 `가격표 관리` 페이지에서 설정 가능하며, 변경사항은 견적 계산에 즉시 반영됩니다:
- RC/트랙/패턴거푸집 두께별 단가
- 모든 부자재 단가 (Terra Flex, 접착 몰탈, 드릴비트, 디스크 앙카 등)
- 모든 인건비 (단열재, 타일, 메지, 패턴거푸집 시공비)
- 디스크 앙카는 기본 가격에서 두께별 배율 적용 (>120mm: 1.125배, >160mm: 1.25배)
